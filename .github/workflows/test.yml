name: ã‚ã‹ã‚Šã‚„ã™ã„GitHub Actions ãƒ†ã‚¹ãƒˆ

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]
  schedule:
    # æ¯æ—¥åˆå‰9æ™‚ï¼ˆJSTï¼‰ã«å®Ÿè¡Œï¼ˆUTC 00:00ï¼‰
    - cron: '0 0 * * *'
  # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½
  workflow_dispatch:

jobs:
  demo:
    name: ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“ ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
      uses: actions/checkout@v4
      
    - name: ğŸ‘‹ æŒ¨æ‹¶ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
      run: |
        echo "========================================="
        echo "ğŸ‰ GitHub Actions ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ï¼"
        echo "========================================="
        echo "å®Ÿè¡Œæ—¥æ™‚: $(date)"
        echo "å®Ÿè¡Œè€…: ${{ github.actor }}"
        echo "ãƒ–ãƒ©ãƒ³ãƒ: ${{ github.ref_name }}"
        echo "å®Ÿè¡Œç†ç”±: ${{ github.event_name }}"
        if [ "${{ github.event_name }}" = "schedule" ]; then
          echo "â° å®šæœŸå®Ÿè¡Œã«ã‚ˆã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œã§ã™"
        elif [ "${{ github.event_name }}" = "workflow_dispatch" ]; then
          echo "ğŸ–±ï¸ æ‰‹å‹•å®Ÿè¡Œã«ã‚ˆã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œã§ã™"
        elif [ "${{ github.event_name }}" = "push" ]; then
          echo "ğŸ“¤ ãƒ—ãƒƒã‚·ãƒ¥ã«ã‚ˆã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œã§ã™"
        fi
        
    - name: ğŸ—‚ï¸ ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚’è¡¨ç¤º
      run: |
        echo "========================================="
        echo "ğŸ“‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§:"
        echo "========================================="
        ls -la --color=never
        echo ""
        echo "ãƒ•ã‚¡ã‚¤ãƒ«æ•°: $(find . -type f | wc -l) å€‹"
        echo "ãƒ•ã‚©ãƒ«ãƒ€æ•°: $(find . -type d | wc -l) å€‹"
        
    - name: ğŸ“„ HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ç¢ºèª
      run: |
        echo "========================================="
        echo "ğŸ” HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°æƒ…å ±:"
        echo "========================================="
        if [ -f "article.html" ]; then
          echo "âœ… article.html ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ"
          echo "ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: $(du -h article.html | cut -f1)"
          echo "ğŸ“ è¡Œæ•°: $(wc -l < article.html) è¡Œ"
          echo ""
          echo "ğŸ“– ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€åˆã®5è¡Œ:"
          echo "----------------------------------------"
          head -5 article.html
          echo "----------------------------------------"
        else
          echo "âŒ article.html ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"
        fi
        
    - name: ğŸ§ª ç°¡å˜ãªãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
      run: |
        echo "========================================="
        echo "ğŸ”¬ åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œä¸­..."
        echo "========================================="
        
        # HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®åŸºæœ¬ãƒã‚§ãƒƒã‚¯
        if grep -q "<html" article.html; then
          echo "âœ… HTMLã‚¿ã‚°ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ"
        else
          echo "âŒ HTMLã‚¿ã‚°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"
        fi
        
        if grep -q "<title" article.html; then
          echo "âœ… titleã‚¿ã‚°ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ"
        else
          echo "âŒ titleã‚¿ã‚°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"
        fi
        
        echo ""
        echo "ğŸ¯ ãƒ†ã‚¹ãƒˆå®Œäº†ï¼"
        
    - name: ğŸŠ å®Ÿè¡Œå®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
      run: |
        echo "========================================="
        echo "ğŸš€ GitHub Actions ã®å®Ÿè¡ŒãŒå®Œäº†ã—ã¾ã—ãŸï¼"
        echo "========================================="
        echo "ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼å…¨ã¦ã®å‡¦ç†ãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸã€‚"